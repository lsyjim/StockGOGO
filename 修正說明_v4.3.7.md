# é‡åŒ–äº¤æ˜“ç³»çµ± v4.3.7 ä¿®æ­£èªªæ˜

## ä¿®æ­£æ—¥æœŸ
2026-01-17

## ä¿®æ­£å…§å®¹

### 1. å¯Œé‚¦ API è·¯å¾‘ä¿®æ­£ âœ…

**å•é¡Œ**ï¼šåº«å­˜æŸ¥è©¢ API å‘¼å«è·¯å¾‘éŒ¯èª¤ï¼Œå°è‡´å‡ºç¾ `'builti...` éŒ¯èª¤

**ä¿®æ­£å‰**ï¼š
```python
result = self.sdk.stock.get_inventories(self.active_account)
```

**ä¿®æ­£å¾Œ**ï¼ˆä¾å®˜æ–¹æ–‡æª”ï¼‰ï¼š
```python
result = self.sdk.accounting.inventories(self.active_account)
```

**å®˜æ–¹æ–‡æª”åƒè€ƒ**ï¼š
- åº«å­˜æŸ¥è©¢ï¼šhttps://www.fbs.com.tw/TradeAPI/docs/trading/library/python/accountManagement/Inventories
- æœªå¯¦ç¾æç›Šï¼šhttps://www.fbs.com.tw/TradeAPI/docs/trading/library/python/accountManagement/UnrealizedPnLDetail

### 2. API æ¬„ä½åç¨±ä¿®æ­£ âœ…

| åŸæ¬„ä½åç¨± | ä¿®æ­£å¾Œæ¬„ä½åç¨± | èªªæ˜ |
|-----------|---------------|------|
| `stk_no` | `stock_no` | è‚¡ç¥¨ä»£è™Ÿ |
| `stk_na` | `stock_name` | è‚¡ç¥¨åç¨± |
| `qty` | `today_qty` | ä»Šæ—¥åº«å­˜é¤˜é¡ |
| `make_a_sum` | `unrealized_profit - unrealized_loss` | æç›Š |

### 3. ä¸»è¦–çª—é‡åŒ–åˆ†æå ±å‘Šï¼šåŠ å…¥è‚¡åƒ¹é¡¯ç¤º âœ…

**ä¿®æ­£å…§å®¹**ï¼šåœ¨ã€Œå®Œæ•´é‡åŒ–åˆ†æå ±å‘Šã€å°è©±æ¡†çš„ç¬¬ä¸€è¡Œé¡¯ç¤ºç›®å‰è‚¡åƒ¹å’Œæ¼²è·Œå¹…

**é¡¯ç¤ºæ ¼å¼**ï¼š
```
ğŸ’° ç›®å‰è‚¡åƒ¹ï¼š$XXX.XX  â–² X.XX (+X.XX%)   â† ä¸Šæ¼²æ™‚ç´…è‰²
ğŸ’° ç›®å‰è‚¡åƒ¹ï¼š$XXX.XX  â–¼ X.XX (-X.XX%)   â† ä¸‹è·Œæ™‚ç¶ è‰²
ğŸ’° ç›®å‰è‚¡åƒ¹ï¼š$XXX.XX  - å¹³ç›¤            â† å¹³ç›¤æ™‚é»ƒè‰²
```

### 4. ä¸‹å–®é é¢åˆ†ææ‘˜è¦ï¼šå­—é«”æ”¾å¤§ âœ…

**ä¿®æ­£å‰**ï¼šå­—é«”å¤§å° 10ptï¼Œä¸æ˜“é–±è®€
**ä¿®æ­£å¾Œ**ï¼šå­—é«”å¤§å° 13ptï¼Œæ›´æ¸…æ™°

| å…ƒç´  | åŸå­—é«” | æ–°å­—é«” |
|-----|-------|-------|
| ä¸»å…§å®¹ | 10pt | 13pt |
| æ¨™é¡Œ | 12pt bold | 14pt bold |
| è‚¡åƒ¹ | - | 18pt bold (æ–°å¢) |
| è³‡è¨Š | 9pt | 12pt |

### 5. ä¸‹å–®é é¢åˆ†ææ‘˜è¦ï¼šåŠ å…¥è‚¡åƒ¹é¡¯ç¤º âœ…

**ä¿®æ­£å…§å®¹**ï¼šåœ¨åˆ†ææ‘˜è¦é–‹é ­é¡¯ç¤ºç›®å‰è‚¡åƒ¹å’Œæ¼²è·Œå¹…

**é¡¯ç¤ºæ ¼å¼**ï¼š
```
ğŸ“ˆ 2330 $XXX.XX â–²X.XX (+X.XX%)
========================================
ã€è§¸ç™¼å ´æ™¯ã€‘ B - æ‹‰å›è²·é€²
ã€æŠ•è³‡å»ºè­°ã€‘ å»ºè­°è²·é€²
...
```

---

## ä¿®æ”¹çš„æª”æ¡ˆ

1. **fubon_trading.py**
   - `get_inventories()` æ–¹æ³•ï¼šä¿®æ­£ API è·¯å¾‘å’Œæ¬„ä½å°æ‡‰
   - `_get_inventories_fallback()` æ–¹æ³•ï¼šæ–°å¢ SDK ç‰ˆæœ¬ç›¸å®¹è™•ç†
   - `_display_analysis_summary()` å‡½æ•¸ï¼šåŠ å…¥è‚¡åƒ¹é¡¯ç¤º
   - åˆ†ææ‘˜è¦å­—é«”æ¨£å¼ï¼šæ”¾å¤§è‡³ 13pt

2. **main.py**
   - `RecommendationDialog._insert_analysis()` æ–¹æ³•ï¼šåœ¨é–‹é ­åŠ å…¥è‚¡åƒ¹é¡¯ç¤º

---

## ä½¿ç”¨èªªæ˜

1. å°‡ `fubon_trading.py` å’Œ `main.py` è¤‡è£½åˆ°æ‚¨çš„å°ˆæ¡ˆç›®éŒ„
2. é‡æ–°å•Ÿå‹•ç¨‹å¼
3. ç™»å…¥å¯Œé‚¦ API å¾Œï¼Œé»æ“Šã€Œåˆ·æ–°åº«å­˜ã€æŒ‰éˆ•æ¸¬è©¦

## æ¸¬è©¦å»ºè­°

```python
# æ¸¬è©¦åº«å­˜æŸ¥è©¢ API
from fubon_neo.sdk import FubonSDK

sdk = FubonSDK()
result = sdk.login(user_id, password, cert_path, cert_password)

if result.is_success:
    account = result.data[0]
    
    # æ¸¬è©¦åº«å­˜æŸ¥è©¢
    inv_result = sdk.accounting.inventories(account)
    print(f"åº«å­˜æŸ¥è©¢: {inv_result.is_success}, {inv_result.message}")
    
    # æ¸¬è©¦æœªå¯¦ç¾æç›Š
    pnl_result = sdk.accounting.unrealized_gains_and_loses(account)
    print(f"æœªå¯¦ç¾æç›Š: {pnl_result.is_success}, {pnl_result.message}")
```

---

## æ³¨æ„äº‹é …

1. ç¢ºä¿ fubon_neo SDK ç‰ˆæœ¬ç‚ºæœ€æ–°
2. è‹¥ä»æœ‰å•é¡Œï¼Œè«‹ç¢ºèª API é‡‘é‘°æ¬Šé™æ˜¯å¦åŒ…å«ã€Œå¸³å‹™æŸ¥è©¢ã€
3. åº«å­˜ API ä¸æœƒå›å‚³è‚¡ç¥¨åç¨±ï¼Œåç¨±æ¬„ä½æœƒé¡¯ç¤ºç©ºç™½
